{"id":"YTP/","dependencies":[{"name":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/package.json","includedInParent":true,"mtime":1529260753465},{"name":"/Users/carlos/dev/source/Staging/prototype/package.json","includedInParent":true,"mtime":1533239245440},{"name":"/Users/carlos/dev/source/Staging/prototype/.babelrc","includedInParent":true,"mtime":1533239245154},{"name":"./DraftFeatureFlags","loc":{"line":16,"column":32},"parent":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/editOnInput.js","resolved":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/DraftFeatureFlags.js"},{"name":"./DraftModifier","loc":{"line":17,"column":28},"parent":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/editOnInput.js","resolved":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/DraftModifier.js"},{"name":"./DraftOffsetKey","loc":{"line":18,"column":29},"parent":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/editOnInput.js","resolved":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/DraftOffsetKey.js"},{"name":"./EditorState","loc":{"line":19,"column":26},"parent":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/editOnInput.js","resolved":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/EditorState.js"},{"name":"fbjs/lib/UserAgent","loc":{"line":20,"column":24},"parent":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/editOnInput.js","resolved":"/Users/carlos/dev/source/Staging/prototype/node_modules/fbjs/lib/UserAgent.js"},{"name":"./findAncestorOffsetKey","loc":{"line":22,"column":36},"parent":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/editOnInput.js","resolved":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/findAncestorOffsetKey.js"},{"name":"fbjs/lib/nullthrows","loc":{"line":23,"column":25},"parent":"/Users/carlos/dev/source/Staging/prototype/node_modules/draft-js/lib/editOnInput.js","resolved":"/Users/carlos/dev/source/Staging/prototype/node_modules/fbjs/lib/nullthrows.js"}],"generated":{"js":"var global = arguments[3];\nvar e=arguments[3],t=require(\"./DraftFeatureFlags\"),n=require(\"./DraftModifier\"),r=require(\"./DraftOffsetKey\"),i=require(\"./EditorState\"),o=require(\"fbjs/lib/UserAgent\"),l=require(\"./findAncestorOffsetKey\"),f=require(\"fbjs/lib/nullthrows\"),a=o.isEngine(\"Gecko\"),s=\"\\n\\n\";function d(o){void 0!==o._pendingStateFromBeforeInput&&(o.update(o._pendingStateFromBeforeInput),o._pendingStateFromBeforeInput=void 0);var d=e.getSelection(),g=d.anchorNode,u=d.isCollapsed,c=g.nodeType!==Node.TEXT_NODE,p=g.nodeType!==Node.TEXT_NODE&&g.nodeType!==Node.ELEMENT_NODE;if(t.draft_killswitch_allow_nontextnodes){if(c)return}else if(p)return;if(g.nodeType===Node.TEXT_NODE&&(null!==g.previousSibling||null!==g.nextSibling)){var E=g.parentNode;g.nodeValue=E.textContent;for(var y=E.firstChild;null!==y;y=y.nextSibling)y!==g&&E.removeChild(y)}var h=g.textContent,T=o._latestEditorState,O=f(l(g)),v=r.decode(O),S=v.blockKey,N=v.decoratorKey,_=v.leafKey,b=T.getBlockTree(S).getIn([N,\"leaves\",_]),m=b.start,x=b.end,A=T.getCurrentContent(),B=A.getBlockForKey(S),k=B.getText().slice(m,x);if(h.endsWith(s)&&(h=h.slice(0,-1)),h!==k){var q,C,D,F,K=T.getSelection(),M=K.merge({anchorOffset:m,focusOffset:x,isBackward:!1}),I=B.getEntityAt(m),w=I&&A.getEntity(I),X=\"MUTABLE\"===(w&&w.getMutability()),j=X?\"spellcheck-change\":\"apply-entity\",L=n.replaceText(A,M,h,B.getInlineStyleAt(m),X?B.getEntityAt(m):null);if(a)q=d.anchorOffset,C=d.focusOffset,F=(D=m+Math.min(q,C))+Math.abs(q-C),q=D,C=F;else{var U=h.length-k.length;D=K.getStartOffset(),F=K.getEndOffset(),q=u?F+U:D,C=F+U}var G=L.merge({selectionBefore:A.getSelectionAfter(),selectionAfter:K.merge({anchorOffset:q,focusOffset:C})});o.update(i.push(T,G,j))}}module.exports=d;","map":{"mappings":[{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":172,"column":0},"generated":{"line":2,"column":0}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":172,"column":0},"generated":{"line":2,"column":4}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":172,"column":0},"generated":{"line":2,"column":6}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":172,"column":0},"generated":{"line":2,"column":16}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":16,"column":0},"generated":{"line":2,"column":19}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":16,"column":0},"generated":{"line":2,"column":21}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":16,"column":0},"generated":{"line":2,"column":29}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":17,"column":0},"generated":{"line":2,"column":52}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":17,"column":0},"generated":{"line":2,"column":54}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":17,"column":0},"generated":{"line":2,"column":62}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":18,"column":0},"generated":{"line":2,"column":81}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":18,"column":0},"generated":{"line":2,"column":83}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":18,"column":0},"generated":{"line":2,"column":91}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":19,"column":0},"generated":{"line":2,"column":111}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":19,"column":0},"generated":{"line":2,"column":113}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":19,"column":0},"generated":{"line":2,"column":121}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":20,"column":0},"generated":{"line":2,"column":138}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":20,"column":0},"generated":{"line":2,"column":140}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":20,"column":0},"generated":{"line":2,"column":148}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":22,"column":0},"generated":{"line":2,"column":170}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":22,"column":0},"generated":{"line":2,"column":172}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":22,"column":0},"generated":{"line":2,"column":180}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":23,"column":0},"generated":{"line":2,"column":207}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":23,"column":0},"generated":{"line":2,"column":209}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":23,"column":0},"generated":{"line":2,"column":217}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":25,"column":0},"generated":{"line":2,"column":240}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":25,"column":0},"generated":{"line":2,"column":242}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":25,"column":0},"generated":{"line":2,"column":244}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":25,"column":0},"generated":{"line":2,"column":253}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":27,"column":0},"generated":{"line":2,"column":262}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":27,"column":0},"generated":{"line":2,"column":264}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":41,"column":0},"generated":{"line":2,"column":271}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":41,"column":0},"generated":{"line":2,"column":280}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":41,"column":0},"generated":{"line":2,"column":282}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":42,"column":0},"generated":{"line":2,"column":290}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":42,"column":0},"generated":{"line":2,"column":294}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":42,"column":0},"generated":{"line":2,"column":296}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":43,"column":0},"generated":{"line":2,"column":327}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":43,"column":0},"generated":{"line":2,"column":329}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":43,"column":0},"generated":{"line":2,"column":336}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":43,"column":0},"generated":{"line":2,"column":338}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":44,"column":0},"generated":{"line":2,"column":368}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":44,"column":0},"generated":{"line":2,"column":370}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":44,"column":0},"generated":{"line":2,"column":404}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":47,"column":0},"generated":{"line":2,"column":407}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":47,"column":0},"generated":{"line":2,"column":411}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":47,"column":0},"generated":{"line":2,"column":413}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":47,"column":0},"generated":{"line":2,"column":415}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":49,"column":0},"generated":{"line":2,"column":430}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":49,"column":0},"generated":{"line":2,"column":432}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":49,"column":0},"generated":{"line":2,"column":434}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":50,"column":0},"generated":{"line":2,"column":445}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":50,"column":0},"generated":{"line":2,"column":447}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":50,"column":0},"generated":{"line":2,"column":449}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":52,"column":0},"generated":{"line":2,"column":461}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":52,"column":0},"generated":{"line":2,"column":463}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":52,"column":0},"generated":{"line":2,"column":465}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":52,"column":0},"generated":{"line":2,"column":476}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":52,"column":0},"generated":{"line":2,"column":481}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":53,"column":0},"generated":{"line":2,"column":491}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":53,"column":0},"generated":{"line":2,"column":493}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":53,"column":0},"generated":{"line":2,"column":495}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":53,"column":0},"generated":{"line":2,"column":506}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":53,"column":0},"generated":{"line":2,"column":511}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":53,"column":0},"generated":{"line":2,"column":522}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":53,"column":0},"generated":{"line":2,"column":524}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":53,"column":0},"generated":{"line":2,"column":535}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":53,"column":0},"generated":{"line":2,"column":540}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":55,"column":0},"generated":{"line":2,"column":553}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":55,"column":0},"generated":{"line":2,"column":556}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":55,"column":0},"generated":{"line":2,"column":558}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":56,"column":0},"generated":{"line":2,"column":595}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":56,"column":0},"generated":{"line":2,"column":598}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":57,"column":0},"generated":{"line":2,"column":600}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":60,"column":0},"generated":{"line":2,"column":612}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":60,"column":0},"generated":{"line":2,"column":615}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":62,"column":0},"generated":{"line":2,"column":617}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":624}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":627}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":629}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":640}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":645}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":657}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":664}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":666}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":683}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":690}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":692}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":66,"column":0},"generated":{"line":2,"column":705}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":71,"column":0},"generated":{"line":2,"column":706}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":71,"column":0},"generated":{"line":2,"column":710}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":71,"column":0},"generated":{"line":2,"column":712}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":71,"column":0},"generated":{"line":2,"column":714}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":72,"column":0},"generated":{"line":2,"column":725}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":72,"column":0},"generated":{"line":2,"column":727}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":72,"column":0},"generated":{"line":2,"column":737}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":72,"column":0},"generated":{"line":2,"column":739}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":751}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":755}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":759}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":761}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":763}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":774}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":781}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":783}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":785}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":73,"column":0},"generated":{"line":2,"column":787}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":74,"column":0},"generated":{"line":2,"column":799}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":74,"column":0},"generated":{"line":2,"column":803}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":75,"column":0},"generated":{"line":2,"column":806}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":75,"column":0},"generated":{"line":2,"column":808}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":75,"column":0},"generated":{"line":2,"column":820}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":80,"column":0},"generated":{"line":2,"column":823}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":80,"column":0},"generated":{"line":2,"column":827}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":80,"column":0},"generated":{"line":2,"column":829}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":80,"column":0},"generated":{"line":2,"column":831}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":81,"column":0},"generated":{"line":2,"column":843}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":81,"column":0},"generated":{"line":2,"column":845}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":81,"column":0},"generated":{"line":2,"column":847}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":82,"column":0},"generated":{"line":2,"column":866}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":82,"column":0},"generated":{"line":2,"column":868}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":82,"column":0},"generated":{"line":2,"column":870}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":82,"column":0},"generated":{"line":2,"column":872}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":84,"column":0},"generated":{"line":2,"column":876}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":84,"column":0},"generated":{"line":2,"column":878}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":84,"column":0},"generated":{"line":2,"column":880}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":84,"column":0},"generated":{"line":2,"column":887}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":85,"column":0},"generated":{"line":2,"column":890}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":85,"column":0},"generated":{"line":2,"column":892}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":85,"column":0},"generated":{"line":2,"column":894}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":86,"column":0},"generated":{"line":2,"column":903}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":86,"column":0},"generated":{"line":2,"column":905}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":86,"column":0},"generated":{"line":2,"column":907}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":87,"column":0},"generated":{"line":2,"column":920}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":87,"column":0},"generated":{"line":2,"column":922}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":87,"column":0},"generated":{"line":2,"column":924}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":89,"column":0},"generated":{"line":2,"column":932}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":89,"column":0},"generated":{"line":2,"column":934}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":89,"column":0},"generated":{"line":2,"column":936}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":89,"column":0},"generated":{"line":2,"column":949}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":89,"column":0},"generated":{"line":2,"column":952}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":89,"column":0},"generated":{"line":2,"column":958}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":89,"column":0},"generated":{"line":2,"column":959}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":89,"column":0},"generated":{"line":2,"column":961}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":89,"column":0},"generated":{"line":2,"column":970}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":90,"column":0},"generated":{"line":2,"column":974}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":90,"column":0},"generated":{"line":2,"column":976}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":90,"column":0},"generated":{"line":2,"column":978}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":91,"column":0},"generated":{"line":2,"column":984}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":91,"column":0},"generated":{"line":2,"column":986}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":91,"column":0},"generated":{"line":2,"column":988}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":93,"column":0},"generated":{"line":2,"column":992}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":93,"column":0},"generated":{"line":2,"column":994}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":93,"column":0},"generated":{"line":2,"column":996}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":94,"column":0},"generated":{"line":2,"column":1016}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":94,"column":0},"generated":{"line":2,"column":1018}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":94,"column":0},"generated":{"line":2,"column":1020}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":94,"column":0},"generated":{"line":2,"column":1035}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":95,"column":0},"generated":{"line":2,"column":1038}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":95,"column":0},"generated":{"line":2,"column":1040}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":95,"column":0},"generated":{"line":2,"column":1042}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":95,"column":0},"generated":{"line":2,"column":1052}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":95,"column":0},"generated":{"line":2,"column":1058}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":95,"column":0},"generated":{"line":2,"column":1060}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":106,"column":0},"generated":{"line":2,"column":1063}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":101,"column":0},"generated":{"line":2,"column":1066}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":101,"column":0},"generated":{"line":2,"column":1068}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":101,"column":0},"generated":{"line":2,"column":1077}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":102,"column":0},"generated":{"line":2,"column":1082}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":102,"column":0},"generated":{"line":2,"column":1084}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":102,"column":0},"generated":{"line":2,"column":1086}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":102,"column":0},"generated":{"line":2,"column":1092}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":102,"column":0},"generated":{"line":2,"column":1095}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":106,"column":0},"generated":{"line":2,"column":1099}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":106,"column":0},"generated":{"line":2,"column":1103}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":106,"column":0},"generated":{"line":2,"column":1105}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":114,"column":0},"generated":{"line":2,"column":1106}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":136,"column":0},"generated":{"line":2,"column":1110}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":136,"column":0},"generated":{"line":2,"column":1112}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":136,"column":0},"generated":{"line":2,"column":1114}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":136,"column":0},"generated":{"line":2,"column":1116}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":114,"column":0},"generated":{"line":2,"column":1118}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":114,"column":0},"generated":{"line":2,"column":1120}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":114,"column":0},"generated":{"line":2,"column":1122}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":117,"column":0},"generated":{"line":2,"column":1137}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":117,"column":0},"generated":{"line":2,"column":1139}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":117,"column":0},"generated":{"line":2,"column":1141}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":117,"column":0},"generated":{"line":2,"column":1147}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":118,"column":0},"generated":{"line":2,"column":1148}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":118,"column":0},"generated":{"line":2,"column":1161}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":119,"column":0},"generated":{"line":2,"column":1163}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":119,"column":0},"generated":{"line":2,"column":1175}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":120,"column":0},"generated":{"line":2,"column":1177}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":120,"column":0},"generated":{"line":2,"column":1189}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1193}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1195}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1197}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1209}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":124,"column":0},"generated":{"line":2,"column":1212}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":124,"column":0},"generated":{"line":2,"column":1214}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":124,"column":0},"generated":{"line":2,"column":1217}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":124,"column":0},"generated":{"line":2,"column":1219}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":124,"column":0},"generated":{"line":2,"column":1229}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":126,"column":0},"generated":{"line":2,"column":1232}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":126,"column":0},"generated":{"line":2,"column":1234}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":125,"column":0},"generated":{"line":2,"column":1247}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":125,"column":0},"generated":{"line":2,"column":1250}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":125,"column":0},"generated":{"line":2,"column":1252}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":132,"column":0},"generated":{"line":2,"column":1269}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":132,"column":0},"generated":{"line":2,"column":1271}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":132,"column":0},"generated":{"line":2,"column":1273}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":132,"column":0},"generated":{"line":2,"column":1293}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1308}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1310}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1312}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1324}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1326}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1328}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1330}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1332}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1349}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1352}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1354}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1356}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1368}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":134,"column":0},"generated":{"line":2,"column":1371}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":138,"column":0},"generated":{"line":2,"column":1377}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":138,"column":0},"generated":{"line":2,"column":1380}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":141,"column":0},"generated":{"line":2,"column":1382}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":141,"column":0},"generated":{"line":2,"column":1384}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":141,"column":0},"generated":{"line":2,"column":1386}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":142,"column":0},"generated":{"line":2,"column":1399}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":142,"column":0},"generated":{"line":2,"column":1401}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":142,"column":0},"generated":{"line":2,"column":1403}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":144,"column":0},"generated":{"line":2,"column":1415}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":143,"column":0},"generated":{"line":2,"column":1418}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":143,"column":0},"generated":{"line":2,"column":1420}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":143,"column":0},"generated":{"line":2,"column":1422}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":143,"column":0},"generated":{"line":2,"column":1427}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":143,"column":0},"generated":{"line":2,"column":1431}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":143,"column":0},"generated":{"line":2,"column":1433}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":144,"column":0},"generated":{"line":2,"column":1437}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":144,"column":0},"generated":{"line":2,"column":1442}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":144,"column":0},"generated":{"line":2,"column":1446}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":144,"column":0},"generated":{"line":2,"column":1448}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":145,"column":0},"generated":{"line":2,"column":1451}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":145,"column":0},"generated":{"line":2,"column":1453}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":146,"column":0},"generated":{"line":2,"column":1455}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":146,"column":0},"generated":{"line":2,"column":1457}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":147,"column":0},"generated":{"line":2,"column":1463}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1464}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1468}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1470}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1472}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1479}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1481}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":154,"column":0},"generated":{"line":2,"column":1488}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":154,"column":0},"generated":{"line":2,"column":1490}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":154,"column":0},"generated":{"line":2,"column":1492}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1509}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1511}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1513}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1528}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1530}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1532}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1534}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1536}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":158,"column":0},"generated":{"line":2,"column":1538}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":158,"column":0},"generated":{"line":2,"column":1540}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":158,"column":0},"generated":{"line":2,"column":1542}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1544}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1548}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1550}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1552}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1558}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":165,"column":0},"generated":{"line":2,"column":1559}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":165,"column":0},"generated":{"line":2,"column":1575}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":165,"column":0},"generated":{"line":2,"column":1577}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":166,"column":0},"generated":{"line":2,"column":1597}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":166,"column":0},"generated":{"line":2,"column":1612}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":166,"column":0},"generated":{"line":2,"column":1614}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":166,"column":0},"generated":{"line":2,"column":1620}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":166,"column":0},"generated":{"line":2,"column":1621}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":166,"column":0},"generated":{"line":2,"column":1634}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":166,"column":0},"generated":{"line":2,"column":1636}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":166,"column":0},"generated":{"line":2,"column":1648}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":169,"column":0},"generated":{"line":2,"column":1654}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":169,"column":0},"generated":{"line":2,"column":1656}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":169,"column":0},"generated":{"line":2,"column":1663}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":169,"column":0},"generated":{"line":2,"column":1665}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":169,"column":0},"generated":{"line":2,"column":1670}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":169,"column":0},"generated":{"line":2,"column":1672}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":169,"column":0},"generated":{"line":2,"column":1674}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":172,"column":0},"generated":{"line":2,"column":1679}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":172,"column":0},"generated":{"line":2,"column":1686}},{"source":"../node_modules/draft-js/lib/editOnInput.js","original":{"line":172,"column":0},"generated":{"line":2,"column":1694}}],"sources":{"../node_modules/draft-js/lib/editOnInput.js":"/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule editOnInput\n * @format\n * \n */\n\n'use strict';\n\nvar DraftFeatureFlags = require('./DraftFeatureFlags');\nvar DraftModifier = require('./DraftModifier');\nvar DraftOffsetKey = require('./DraftOffsetKey');\nvar EditorState = require('./EditorState');\nvar UserAgent = require('fbjs/lib/UserAgent');\n\nvar findAncestorOffsetKey = require('./findAncestorOffsetKey');\nvar nullthrows = require('fbjs/lib/nullthrows');\n\nvar isGecko = UserAgent.isEngine('Gecko');\n\nvar DOUBLE_NEWLINE = '\\n\\n';\n\n/**\n * This function is intended to handle spellcheck and autocorrect changes,\n * which occur in the DOM natively without any opportunity to observe or\n * interpret the changes before they occur.\n *\n * The `input` event fires in contentEditable elements reliably for non-IE\n * browsers, immediately after changes occur to the editor DOM. Since our other\n * handlers override or otherwise handle cover other varieties of text input,\n * the DOM state should match the model in all controlled input cases. Thus,\n * when an `input` change leads to a DOM/model mismatch, the change should be\n * due to a spellcheck change, and we can incorporate it into our model.\n */\nfunction editOnInput(editor) {\n  if (editor._pendingStateFromBeforeInput !== undefined) {\n    editor.update(editor._pendingStateFromBeforeInput);\n    editor._pendingStateFromBeforeInput = undefined;\n  }\n\n  var domSelection = global.getSelection();\n\n  var anchorNode = domSelection.anchorNode,\n      isCollapsed = domSelection.isCollapsed;\n\n  var isNotTextNode = anchorNode.nodeType !== Node.TEXT_NODE;\n  var isNotTextOrElementNode = anchorNode.nodeType !== Node.TEXT_NODE && anchorNode.nodeType !== Node.ELEMENT_NODE;\n\n  if (DraftFeatureFlags.draft_killswitch_allow_nontextnodes) {\n    if (isNotTextNode) {\n      return;\n    }\n  } else {\n    if (isNotTextOrElementNode) {\n      // TODO: (t16149272) figure out context for this change\n      return;\n    }\n  }\n\n  if (anchorNode.nodeType === Node.TEXT_NODE && (anchorNode.previousSibling !== null || anchorNode.nextSibling !== null)) {\n    // When typing at the beginning of a visual line, Chrome splits the text\n    // nodes into two. Why? No one knows. This commit is suspicious:\n    // https://chromium.googlesource.com/chromium/src/+/a3b600981286b135632371477f902214c55a1724\n    // To work around, we'll merge the sibling text nodes back into this one.\n    var span = anchorNode.parentNode;\n    anchorNode.nodeValue = span.textContent;\n    for (var child = span.firstChild; child !== null; child = child.nextSibling) {\n      if (child !== anchorNode) {\n        span.removeChild(child);\n      }\n    }\n  }\n\n  var domText = anchorNode.textContent;\n  var editorState = editor._latestEditorState;\n  var offsetKey = nullthrows(findAncestorOffsetKey(anchorNode));\n\n  var _DraftOffsetKey$decod = DraftOffsetKey.decode(offsetKey),\n      blockKey = _DraftOffsetKey$decod.blockKey,\n      decoratorKey = _DraftOffsetKey$decod.decoratorKey,\n      leafKey = _DraftOffsetKey$decod.leafKey;\n\n  var _editorState$getBlock = editorState.getBlockTree(blockKey).getIn([decoratorKey, 'leaves', leafKey]),\n      start = _editorState$getBlock.start,\n      end = _editorState$getBlock.end;\n\n  var content = editorState.getCurrentContent();\n  var block = content.getBlockForKey(blockKey);\n  var modelText = block.getText().slice(start, end);\n\n  // Special-case soft newlines here. If the DOM text ends in a soft newline,\n  // we will have manually inserted an extra soft newline in DraftEditorLeaf.\n  // We want to remove this extra newline for the purpose of our comparison\n  // of DOM and model text.\n  if (domText.endsWith(DOUBLE_NEWLINE)) {\n    domText = domText.slice(0, -1);\n  }\n\n  // No change -- the DOM is up to date. Nothing to do here.\n  if (domText === modelText) {\n    // This can be buggy for some Android keyboards because they don't fire\n    // standard onkeydown/pressed events and only fired editOnInput\n    // so domText is already changed by the browser and ends up being equal\n    // to modelText unexpectedly\n    return;\n  }\n\n  var selection = editorState.getSelection();\n\n  // We'll replace the entire leaf with the text content of the target.\n  var targetRange = selection.merge({\n    anchorOffset: start,\n    focusOffset: end,\n    isBackward: false\n  });\n\n  var entityKey = block.getEntityAt(start);\n  var entity = entityKey && content.getEntity(entityKey);\n  var entityType = entity && entity.getMutability();\n  var preserveEntity = entityType === 'MUTABLE';\n\n  // Immutable or segmented entities cannot properly be handled by the\n  // default browser undo, so we have to use a different change type to\n  // force using our internal undo method instead of falling through to the\n  // native browser undo.\n  var changeType = preserveEntity ? 'spellcheck-change' : 'apply-entity';\n\n  var newContent = DraftModifier.replaceText(content, targetRange, domText, block.getInlineStyleAt(start), preserveEntity ? block.getEntityAt(start) : null);\n\n  var anchorOffset, focusOffset, startOffset, endOffset;\n\n  if (isGecko) {\n    // Firefox selection does not change while the context menu is open, so\n    // we preserve the anchor and focus values of the DOM selection.\n    anchorOffset = domSelection.anchorOffset;\n    focusOffset = domSelection.focusOffset;\n    startOffset = start + Math.min(anchorOffset, focusOffset);\n    endOffset = startOffset + Math.abs(anchorOffset - focusOffset);\n    anchorOffset = startOffset;\n    focusOffset = endOffset;\n  } else {\n    // Browsers other than Firefox may adjust DOM selection while the context\n    // menu is open, and Safari autocorrect is prone to providing an inaccurate\n    // DOM selection. Don't trust it. Instead, use our existing SelectionState\n    // and adjust it based on the number of characters changed during the\n    // mutation.\n    var charDelta = domText.length - modelText.length;\n    startOffset = selection.getStartOffset();\n    endOffset = selection.getEndOffset();\n\n    anchorOffset = isCollapsed ? endOffset + charDelta : startOffset;\n    focusOffset = endOffset + charDelta;\n  }\n\n  // Segmented entities are completely or partially removed when their\n  // text content changes. For this case we do not want any text to be selected\n  // after the change, so we are not merging the selection.\n  var contentWithAdjustedDOMSelection = newContent.merge({\n    selectionBefore: content.getSelectionAfter(),\n    selectionAfter: selection.merge({ anchorOffset: anchorOffset, focusOffset: focusOffset })\n  });\n\n  editor.update(EditorState.push(editorState, contentWithAdjustedDOMSelection, changeType));\n}\n\nmodule.exports = editOnInput;"},"lineCount":null}},"hash":"b1f0d4c8ed000cd3c409f30a949fce0c","cacheData":{"env":{}}}